from __future__ import absolute_import, division, print_function
__metaclass__ = type

class FilterModule(object):
    def filters(self):
        return {
            'combine_dicts': self.combine_dicts,
        }

    def combine_dicts(self, last_sync_response, last_heartbeat, last_password_set):
        combined_data = {}
        all_keys = set()
        # Collect all unique device IDs
        all_keys.update(last_sync_response.keys())
        all_keys.update(last_heartbeat.keys())
        all_keys.update(last_password_set.keys())

        # Combine data for each device ID
        for key in all_keys:
            combined_data[key] = {
                'last_sync_response': last_sync_response.get(key, ''),
                'last_heartbeat': last_heartbeat.get(key, ''),
                'last_password_set': last_password_set.get(key, ''),
            }
        return combined_data
